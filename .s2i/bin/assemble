#!/bin/bash
echo "Custom assembling"

BUILD_DIR=/tmp/src

# change to the src dir
cd $BUILD_DIR

# use the central nexus instance
cp $BUILD_DIR/.m2/settings.xml $HOME/.m2/settings.xml

echo "Buid the artifact"

# standard maven build
MAVEN_OPTS="-Xmx200m" && mvn -Duser.home=${HOME} -DskipTests clean install

echo "Copying deployments from target to /deployments..."
ls -la $BUILD_DIR
ls -la $BUILD_DIR/target

cp $BUILD_DIR/target/*.jar /deployments

#ls -la /deployments

#env

#Copying deployments from target to /deployments...
#'/tmp/src/target/rest-http-2.3.2-1-SNAPSHOT.jar' -> '/deployments/rest-http-2.3.2-1-SNAPSHOT.jar'

echo "done ..."
#while [ 1 ]
#do
#    echo "waiting ..."
#    sleep 2000
#done